Zabbixサーバ・プロキシ構築
==========================

構成概要
--------

Zabbix老朽更新作業のため、以下 Zabbix 新サーバの構築手順を記します。

   * Zabbixサーバ1台とZabbixプロキシ4台のクラスター構成とします
   * 各サーバ用途のVM環境に構築をします。OS は Oracle Linux 8.x とします
   * MySQL 8.0、 PHP7.3、Zabbix 6.0パッケージをインストールします
   * Zabbix のクラスター構成である。サーバ・プロキシ構成で複数 VM で構築します
   * プロキシの構成はパッシブモードとします
   * MySQL パーティショニング設定・Oracleクライアントインストールを行います

手順概要
--------

以下に手順を記します。
初めに Zabbix サーバの構築をし、そのあとにプロキシの構築をします。

   * Zabbix サーバ構築
      * 手順1、2 の Zabbix サーバ構築を実施します
   * プロキシーサーバ構築
      * プロキシサーバで手順1、3、4 のプロキシ構築を実施します
   * エージェント設定
      * 全サーバで手順 5 のエージェント設定を行います
   * 最後に以下を実施
      * Zabbix サーバで 6のMySQL パーティショニングを行います
      * 全サーバで手順7 の Oracle クライアントインストールを行います

   **目次**

   .. toctree::
      :maxdepth: 1

      01_VMInitialSetup
      02_ZabbixServerSetup
      03_ZabbixProxySetup
      04_ZabbixProxyConfiguration
      05_ZabbixAgentSetup
      06_MySQLPartitioning
      07_OracleClientSetup

新 Zabbix 構成検討
------------------

.. note::

   **（参考）新 Zabbix 構成検討のトピックスを以下に記します。**

   * Zabbix バージョン構成について以下理由からZabbix6.0を選定します。

       - Zabbix 7.0は最近リリースされたバージョンで、新機能が多く、安定性や互換性の問題が発生する恐れがある。
       - CVE-2024-42327の脆弱性はZabbix 6.0.32で対処済み。
       - 現行システムとの互換性を重視し、Zabbix 6.0.32での準備を進める。

       - *OS、パッケージソフト構成*:

           - Oracle Linux 8.8
           - Zabbix 6.0（サーバ＋プロキシ）
           - MySQL 8.0
           - PHP 7.3

       - *Zabbix プロキシ構成*:

           - 安定性や既存の互換性を考慮してパッシブモードにする。
           - アクティブモードはファイアウォールを経由して監視設定する場合など複雑なネットワーク構成
             に有利だが、これらは不要でネットワーク構成がシンプルなパッシブモードを推奨。
           - エージェントの通信設定もシンプルになり、既存システムの監視との互換性が高い。

