ディレクトリ構成
================

監視サーバのディレクトリ構成
~~~~~~~~~~~~~~~~~~~~~~~~~~~~

監視サーバでインストールするソフトウェアのディレクトリ構成は以下の通りです。

-  **/usr/local** の下にエージェント用Webサービスの Apache HTTP サーバと
   Tomcat Webコンテナを配置します。
-  **/home/{インストールユーザ}/getperf**
   の下に集計モジュールの本体と、ドキュメント、設定ファイル一式をOS一般ユーザのホームディレクトリ下に配置します。
-  **/etc/getperf/ssl**　の下にエージェント用Webサービス通信用のSSL証明書を配置します。
-  **任意のディレクトリ**
   に監視サイト固有のデータ、設定、集計定義ファイルを配置します。監視サイトの初期化コマンド実行時に 'initsite {サイトホーム}'　として引数にサイトホームディレクトリ(SITE\_HOME)を指定します。

監視エージェントのディレクトリ構成
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

監視エージェントは一般ユーザのホームディレクトリ下にモジュール一式を配置します。

-  インストールはコンパイル済みバイナリパッケージをダウンロードして、解凍します。
-  インストール先は任意ですが、通常は監視エージェント専用の一般ユーザのホームディレクトリ下($HOME/ptune)に配置します。
-  Windows 環境も任意ですが、デフォルトは　c:の下に配置します。
-  エージェント用ディレクトリに 100 MBのディスク容量が必要です。

各ソフトウェアの使用ポート
~~~~~~~~~~~~~~~~~~~~~~~~~~

監視サーバで各ソフトウェアが使用するポートは以下の通りです。これらポートはあらかじめ設定ファイルに記述することで、異なるポートを指定することが可能です。

+-----------------------------------+---------------+------------+
| 用途                              | 設定ソフト    | 使用ポート |
+===================================+===============+============+
| Cacti Webコンソール               | Apache HTTP   | 80         |
+-----------------------------------+---------------+------------+
| エージェントWebサービス(管理用)   | Apache HTTP   | 57000      |
+-----------------------------------+---------------+------------+
|                                   | Apache HTTPS  | 57443      |
+-----------------------------------+---------------+------------+
|                                   | Tomcat 管理用 | 57005      |
+-----------------------------------+---------------+------------+
|                                   | Tomcat AJP用  | 57009      |
+-----------------------------------+---------------+------------+
| エージェントWebサービス(データ用) | Apache HTTP   | 58000      |
+-----------------------------------+---------------+------------+
|                                   | Apache HTTPS  | 58443      |
+-----------------------------------+---------------+------------+
|                                   | Tomcat 管理用 | 58005      |
+-----------------------------------+---------------+------------+
|                                   | Tomcat AJP用  | 58009      |
+-----------------------------------+---------------+------------+
| Zabbix Webコンソール(オプション)  | Apache HTTP   | 80         |
+-----------------------------------+---------------+------------+
| Zabbixサーバ(オプション)          | Zabbix        | 10050      |
+-----------------------------------+---------------+------------+
| InfluxDBローダー(オプション)      | InfluxDB      | 8086       |
+-----------------------------------+---------------+------------+

Zabbixはオプションですが既定は有効です。

